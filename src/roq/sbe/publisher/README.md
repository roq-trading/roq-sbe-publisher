TODO

* cache encoded blob
* proper limited depth
